(()=>{var eaCollectionHandler=function(e){document.querySelectorAll("button.field-collection-table-add-button").forEach((function(e){var t=e.closest("[data-ea-collection-table-field]");t&&!t.classList.contains("processed")&&(EaCollectionProperty.handleAddButton(e,t),EaCollectionProperty.updateCollectionItemCssClasses(t))})),document.querySelectorAll("button.field-collection-table-delete-button").forEach((function(e){e.addEventListener("click",(function(){var t=e.closest("[data-ea-collection-table-field]");e.closest(".field-collection-table-item").remove(),document.dispatchEvent(new Event("ea.collection.item-removed")),EaCollectionProperty.updateCollectionItemCssClasses(t)}))}))};window.addEventListener("DOMContentLoaded",eaCollectionHandler),document.addEventListener("ea.collection.item-added",eaCollectionHandler);var EaCollectionProperty={handleAddButton:function handleAddButton(addButton,collection){addButton.addEventListener("click",(function(){var isArrayCollection=collection.classList.contains("field-array"),numItems=parseInt(collection.dataset.numItems),formTypeNamePlaceholder=collection.dataset.formTypeNamePlaceholder,labelRegexp=new RegExp(formTypeNamePlaceholder+"label__","g"),nameRegexp=new RegExp(formTypeNamePlaceholder,"g"),newItemHtml=collection.dataset.prototype.replace(labelRegexp,++numItems).replace(nameRegexp,numItems);collection.dataset.numItems=numItems;var newItemInsertionSelector=".ea-form-collection-table-items table > tbody",collectionItemsWrapper=collection.querySelector(newItemInsertionSelector);collectionItemsWrapper.insertAdjacentHTML("beforeend",newItemHtml);var collectionItems=collectionItemsWrapper.querySelectorAll(".field-collection-table-item"),lastElement=collectionItems[collectionItems.length-1];lastElement.querySelectorAll("script").forEach((function(script){return eval(script.innerHTML)})),document.dispatchEvent(new Event("ea.collection.item-added"))})),collection.classList.add("processed")},updateCollectionItemCssClasses:function(e){if(null!==e){var t=e.querySelectorAll(".field-collection-table-item");t.forEach((function(e){return e.classList.remove("field-collection-table-item-first","field-collection-table-item-last")}));var l=t[0];if(void 0!==l){l.classList.add("field-collection-table-item-first");var o=t[t.length-1];void 0!==o&&o.classList.add("field-collection-table-item-last")}}}}})();